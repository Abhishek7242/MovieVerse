!<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>MovieVerse — Best Movies (by Rating)</title>
<link rel="stylesheet" href="./home.css">
  </head>

  <body>
    <header>
      <div>
        <h1>MovieVerse</h1>
        <p class="lead">Top movies sorted by rating — responsive & simple cards.</p>
      </div>
    </header>

    <main>
      <div id="gallery" aria-live="polite"></div>
    </main>

    <script>
      // ============================
      // CONFIG: put your movies here
      // Each item: { name: "Movie Title", url: "https://...", rating: 8.7 }
      // rating: numeric where higher = better
      // ============================
      const movies = [
        { name: "Inception", url: "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_.jpg", rating: 8.8 },
        { name: "Power Project", url: "https://m.media-amazon.com/images/M/MV5BY2VjMzUyNGYtMDM5Zi00YWQyLTlhYzItZGQwZWZhNmEwNzY2XkEyXkFqcGc@._V1_.jpg", rating: 7.1 },
        { name: "The Dark Knight", url: "https://image.tmdb.org/t/p/w780/1hRoyzDtpgMU7Dz4JF22RANzQO7.jpg", rating: 9.0 },
        { name: "Interstellar", url: "https://image.tmdb.org/t/p/w780/rAiYTfKGqDCRIIqo664sY9XZIvQ.jpg", rating: 8.6 },
        { name: "Parasite", url: "https://image.tmdb.org/t/p/w780/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg", rating: 8.6 },
        { name: "The Matrix", url: "https://image.tmdb.org/t/p/w780/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg", rating: 8.7 },
      ];

      const gallery = document.getElementById("gallery");

      function escapeHtml(s = "") {
        return String(s).replace(/[&<>"']/g, (c) =>
          ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[c])
        );
      }

      // stable sort: highest rating first
      const sorted = movies.map((m,i) => ({...m, __idx:i}))
        .sort((a,b) => {
          if (b.rating === a.rating) return a.__idx - b.__idx;
          return (b.rating ?? -Infinity) - (a.rating ?? -Infinity);
        });

      const maxRating = sorted.reduce((mx,m) => Math.max(mx, Number(m.rating ?? -Infinity)), -Infinity);

      function createCard(movie) {
        const isTop = Number(movie.rating) === maxRating;

        const card = document.createElement("article");
        card.className = "card" + (isTop ? " top" : "");
        card.setAttribute("tabindex","0");
        card.setAttribute("aria-label", movie.name + " — rating " + (movie.rating ?? "N/A"));

        const thumb = document.createElement("div");
        thumb.className = "thumb";

        const img = document.createElement("img");
        img.alt = movie.name || "poster";
        img.src = movie.url;
        img.loading = "lazy";

        img.onerror = function () {
          thumb.innerHTML = "";
          const initials = (movie.name || "")
            .split(" ")
            .map(w => w[0] || "")
            .slice(0, 2)
            .join("")
            .toUpperCase() || "?";
          const fallback = document.createElement("div");
          fallback.className = "fallback-initials";
          fallback.textContent = initials;
          thumb.appendChild(fallback);
        };

        thumb.appendChild(img);

        const info = document.createElement("div");
        info.className = "info";

        const title = document.createElement("div");
        title.className = "title";
        title.textContent = movie.name || "Untitled";

        const meta = document.createElement("div");
        meta.className = "meta";
        meta.textContent = "Movie";

        // rating pill (simple)
        const rating = document.createElement("div");
        rating.className = "rating-pill";
        rating.textContent = (movie.rating !== undefined && movie.rating !== null) ? Number(movie.rating).toFixed(1) + " / 10" : "N/A";

        // small helper text
        const small = document.createElement("div");
        small.className = "small-muted";
        small.textContent = "Higher is better";

        // append in order: title + meta + rating + small
        info.appendChild(title);
        const row = document.createElement("div");
        row.style.display = "flex";
        row.style.alignItems = "center";
        row.style.gap = "8px";
        row.appendChild(meta);
        row.appendChild(rating);
        info.appendChild(row);
        info.appendChild(small);

        card.appendChild(thumb);
        card.appendChild(info);

        return card;
      }

      // render
      gallery.innerHTML = "";
      sorted.forEach(m => gallery.appendChild(createCard(m)));
    </script>
  </body>
</html>
